import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.stereotype.Repository;

@Repository
public class DualDatabaseRepository {

    private final JdbcTemplate firstJdbcTemplate;
    private final JdbcTemplate secondJdbcTemplate;

    public DualDatabaseRepository(
            @Qualifier("firstJdbcTemplate") JdbcTemplate firstJdbcTemplate,
            @Qualifier("secondJdbcTemplate") JdbcTemplate secondJdbcTemplate) {
        this.firstJdbcTemplate = firstJdbcTemplate;
        this.secondJdbcTemplate = secondJdbcTemplate;
    }

    public int getUserCountFromFirstDB() {
        String sql = "SELECT COUNT(*) FROM users";
        return firstJdbcTemplate.queryForObject(sql, Integer.class);
    }

    public int getReportCountFromSecondDB() {
        String sql = "SELECT COUNT(*) FROM reports";
        return secondJdbcTemplate.queryForObject(sql, Integer.class);
    }
}
